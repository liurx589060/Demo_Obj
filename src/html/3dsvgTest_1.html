<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>企业分析</title>
  <!-- 引入 echarts.js -->
  <script src="./js/jquery-3.0.0.min.js"></script>
  <script src='js/jquery.svg3dtagcloud.min.js'></script>
  </head>

  <div id='holder'></div><p></p>
  <button id="refresh">更新数据</button>


    <script type="text/javascript">

    //--------------------------3D 词云图 -----------------

    var fWidth = Math.min($(window).height(),$(window).width());
    var settings = {
      entries: [],//数据
      width: fWidth,//宽度
      height: fWidth,//高度
      radius: '60%',
      radiusMin: 50,
      bgDraw: true,//是否显示背景
      bgColor: '#060d27',//背景颜色
      opacityOver: 1.00,
      opacityOut: 0.05,
      opacitySpeed: 6,
      fov: 1500,
      speed: 0.1,//旋转的速度
      fontFamily: 'Oswald, Arial, sans-serif',
      fontSize: '18',//默认字体大小
      fontColor: '#8B4513',//默认字体颜色
      fontWeight: 'normal',//bold
      fontStyle: 'normal',//italic
      fontStretch: 'normal',//wider, narrower, ultra-condensed, extra-condensed, condensed, semi-condensed, semi-expanded, expanded, extra-expanded, ultra-expanded
      fontToUpperCase: true,
      tooltipFontFamily: 'Oswald, Arial, sans-serif',
      tooltipFontSize: '11',
      tooltipFontColor: 'red',
      tooltipFontWeight: 'normal',//bold
      tooltipFontStyle: 'normal',//italic
      tooltipFontStretch: 'normal',//wider, narrower, ultra-condensed, extra-condensed, condensed, semi-condensed, semi-expanded, expanded, extra-expanded, ultra-expanded
      tooltipFontToUpperCase: false,
      tooltipTextAnchor: 'left',
      tooltipDiffX: 0,
      tooltipDiffY: 10,
      link:false

    };

    var isFirst = false;
    $( document ).ready( function() {
      var entries = [
        //这里的fontColor设置字体颜色,fontSize设置字体大小,还有fontFamily,fontWeight,fontStyle,fontStretch这几个属性,做什么就自己研究吧
        { label: '郁闷',fontColor:'red',fontSize:28, url:                     'http://niklasknaack.blogspot.de/', target: '_button' },
        { label: '慌张',fontColor:'#78c2a6',fontSize:50},
        { label: '惊讶',fontColor:'#32b7b9'},
        { label: '棒棒哒', url: 'http://www.baidu.com/', target: '_top'},
        { label: '很有趣', url: 'https://jsfiddle.net/user/NiklasKnaack/fiddles/', target: '_top' },
        { label: '还行', url: 'http://codepen.io/', target: '_top' },
        { label: '污染严重', url: 'http://threejs.org/', target: '_top' },
        { label: '有帮助', url: 'http://webglstudio.org/', target: '_top' },
        { label: '能走', url: 'http://jscompress.com/', target: '_top' },
        { label: '瓶颈', url: 'https://tinypng.com/', target: '_top' },
        { label: '哈哈', url: 'http://caniuse.com/', target: '_top' },
        { label: '呵呵', url: 'https://goo.gl/', target: '_top' },
        { label: '无敌', url: 'http://www.opinionatedgeek.com/DotNet/Tools/HTMLEncode/Encode.aspx', target: '_top' },
        { label: '寂寞', url: 'https://twitter.com/niklaswebdev', target: '_top' },
        { label: '杂七杂八', url: 'http://nkunited.deviantart.com/', target: '_top' },
        { label: '乱七八糟', url: 'http://gulpjs.com/', target: '_top' },
        { label: '么么哒', url: 'https://www.browsersync.io/', target: '_top' },
        { label: '去吧', url: 'https://github.com/', target: '_top' },
        { label: '来吧', url: 'https://www.shadertoy.com/', target: '_top' },
        { label: '走吧', url: 'http://gamua.com/starling/', target: '_top' },
        { label: '哈哈呵呵', url: 'http://jsperf.com/', target: '_top' },
        { label: '天天向上', url: 'http://foundation.zurb.com/', target: '_top' },
        { label: '好好学习', url: 'http://createjs.com/', target: '_top' },
        { label: '一天一个样', url: 'http://julian.com/research/velocity/', target: '_top' },
        { label: '三天打鱼两天晒网', url: 'https://greensock.com/docs/#/HTML5/GSAP/TweenLite/', target: '_top' },
        { label: '先知', url: 'https://jquery.com/', target: '_top' },
        { label: '恶魔', url: 'http://www.jqueryrain.com/', target: '_top' },
        { label: 'OK', url: 'http://jquery-plugins.net/', target: '_top' },

      ];

      if(!isFirst) {
        settings.entries = entries;
        $( '#holder' ).svg3DTagCloud( settings );
        isFirst = true;
      }

      // var dates = [
      //   //这里的fontColor设置字体颜色,fontSize设置字体大小,还有fontFamily,fontWeight,fontStyle,fontStretch这几个属性,做什么就自己研究吧
      //   { label: '郁闷',fontColor:'red',fontSize:28, url:                     'http://niklasknaack.blogspot.de/', target: '_button' },
      //   { label: '慌张',fontSize:90},
      //   { label: '惊讶',fontColor:'#32b7b9'},
      //   { label: '棒棒哒', url: 'http://www.baidu.com/'},
      //   { label: '很有趣', url: 'https://jsfiddle.net/user/NiklasKnaack/fiddles/', target: '_blank' },
      //
      // ];

      $.getJSON("./files/cay_data.json",function (datas) {
        var count = datas.length;
        var newDatas = [];
        for(var i = 0 ; i < count ; i++) {
          var data = datas[i];
          var colors = ['#4889ff','#679dff','#84b0ff','#b2cdff'];
          var size = parseFloat(data['fontSize']);
          if(size >= 10*10000) {
            data['fontSize'] = size/1000;
            data['fontColor'] = colors[0];

            newDatas.push(data);
          }else if(size >= 800 && size < 10*10000) {
            var subSize = 0;
            if(size >= 800 && size < 2000) {
              subSize = size/40;
            }else if(size >= 2000 && size < 10000) {
              subSize = size/200;
            }else if(size >= 10000 && size < 5*10000) {
              subSize = size/500;
            }else if(size >= 5*10000 && size < 10*10000) {
              subSize = size/800;
            }
            data['fontSize'] = subSize;
            data['fontColor'] = colors[1];

            newDatas.push(data);
          }else if(size >= 400 && size < 800) {
            data['fontSize'] = size/40;
            data['fontColor'] = colors[2];
            newDatas.push(data);
          }else if(size >= 15 && size < 400) {
            data['fontSize'] = size/15;
            data['fontColor'] = colors[3];
            newDatas.push(data);
          }
        }

        newDatas.sort(randomsort);
        $('#refresh').click(function () {
          setData(newDatas)
        });
      });
    } );

    function randomsort(a, b) {
      return Math.random()>.5 ? -1 : 1;
    }

    function setData(datas) {
      settings.entries = datas;
      $( '#holder' ).svg3DTagCloud( settings );
    }
  </script>
  </body>
</html>
